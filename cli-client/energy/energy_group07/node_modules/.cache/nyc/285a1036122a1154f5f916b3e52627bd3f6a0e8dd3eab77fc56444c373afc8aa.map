{"version":3,"file":"/home/vangelis/TL19-07/cli-client/energy/energy_group07/src/commands/Login.ts","sources":["/home/vangelis/TL19-07/cli-client/energy/energy_group07/src/commands/Login.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,MAAM,SAAS,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC5C,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AACjC,MAAM,SAAS,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC5C,MAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AACjC,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACvB,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC/B,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,MAAM,WAAW,GAAG,EAAE,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;AAClD,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,WAAW,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;AAC5F,MAAM,YAAa,SAAQ,SAAS,CAAC,OAAO;IACxC,KAAK,CAAC,GAAG;QACL,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;QAC3C,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;QACvB,IAAI,GAAG,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;QAClC,IAAI,MAAM,GAAG,EAAE,CAAC,YAAY,CAAC,qBAAqB,EAAE,MAAM,CAAC,CAAC;QAC5D,IAAI,MAAM,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;QAC/B,IAAI,MAAM,KAAK,OAAO,EAAE;YACpB,OAAO,CAAC,GAAG,CAAC,2EAA2E,CAAC,CAAC;SAC5F;aACI;YACD,IAAI,IAAI,GAAG;gBACP,QAAQ,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE;gBAC7B,KAAK,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE;aAC1B,CAAC;YACF,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,yCAAyC,EAAE,IAAI,CAAC,CAAC;YACzF,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC5C,EAAE,CAAC,aAAa,CAAC,qBAAqB,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;YAC1E,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;SACzC;IACL,CAAC;CACJ;AACD,OAAO,CAAC,YAAY,GAAG,YAAY,CAAC;AACpC,YAAY,CAAC,KAAK,GAAG;IACjB,QAAQ,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC;IAC1D,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,EAAE;CAClC,CAAC","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst command_1 = require(\"@oclif/command\");\nconst axios_1 = require(\"axios\");\nconst command_2 = require(\"@oclif/command\");\nconst bcrypt = require('bcrypt');\nvar fs = require('fs');\nconst https = require('https');\nvar colors = require('colors');\nconst client_cert = fs.readFileSync('ca-crt.pem');\naxios_1.default.defaults.httpsAgent = new https.Agent({ ca: client_cert, keepAlive: true });\nclass LoginCommand extends command_1.default {\n    async run() {\n        const { flags } = this.parse(LoginCommand);\n        var fs = require('fs');\n        var jwt = require('jsonwebtoken');\n        var check1 = fs.readFileSync('softeng19bAPI.token', 'utf8');\n        var check2 = check1.toString();\n        if (check2 !== 'empty') {\n            console.log(\"Unfortunately another user is logged in right now. You will have to wait.\");\n        }\n        else {\n            let data = {\n                username: `${flags.username}`,\n                passw: `${flags.passw}`\n            };\n            const user = await axios_1.default.post('https://localhost:8765/energy/api/Login', data);\n            let token = JSON.stringify(user.data.token);\n            fs.writeFileSync('softeng19bAPI.token', token.replace(/\"/g, ''), 'utf-8');\n            console.log(\"Successfully logged in\");\n        }\n    }\n}\nexports.LoginCommand = LoginCommand;\nLoginCommand.flags = {\n    username: command_2.flags.string({ dependsOn: ['passw'] }),\n    passw: command_2.flags.string()\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvdmFuZ2VsaXMvVEwxOS0wNy9jbGktY2xpZW50L2VuZXJneS9lbmVyZ3lfZ3JvdXAwNy9zcmMvY29tbWFuZHMvTG9naW4udHMiLCJzb3VyY2VzIjpbIi9ob21lL3ZhbmdlbGlzL1RMMTktMDcvY2xpLWNsaWVudC9lbmVyZ3kvZW5lcmd5X2dyb3VwMDcvc3JjL2NvbW1hbmRzL0xvZ2luLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNENBQW9DO0FBQ3BDLGlDQUF5QjtBQUN6Qiw0Q0FBcUM7QUFDckMsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2pDLElBQUksRUFBRSxHQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNyQixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7QUFDOUIsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9CLE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUE7QUFDakQsZUFBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUMsRUFBRSxFQUFHLFdBQVcsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQTtBQUVoRixNQUFhLFlBQWEsU0FBUSxpQkFBTztJQU12QyxLQUFLLENBQUMsR0FBRztRQUNQLE1BQU0sRUFBQyxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3pDLElBQUksRUFBRSxHQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQixJQUFJLEdBQUcsR0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDaEMsSUFBSSxNQUFNLEdBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxxQkFBcUIsRUFBQyxNQUFNLENBQUMsQ0FBQztRQUN6RCxJQUFJLE1BQU0sR0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDN0IsSUFBSSxNQUFNLEtBQUssT0FBTyxFQUFFO1lBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQywyRUFBMkUsQ0FBQyxDQUFDO1NBQUM7YUFDL0c7WUFDSixJQUFJLElBQUksR0FBRztnQkFDVixRQUFRLEVBQUUsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFFO2dCQUM3QixLQUFLLEVBQUUsR0FBRyxLQUFLLENBQUMsS0FBSyxFQUFFO2FBQ3ZCLENBQUE7WUFDRCxNQUFNLElBQUksR0FBQyxNQUFNLGVBQUssQ0FBQyxJQUFJLENBQUMseUNBQXlDLEVBQUMsSUFBSSxDQUFDLENBQUM7WUFDNUUsSUFBSSxLQUFLLEdBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQ3pDLEVBQUUsQ0FBQyxhQUFhLENBQUMscUJBQXFCLEVBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUMsRUFBRSxDQUFDLEVBQUMsT0FBTyxDQUFDLENBQUM7WUFDdkUsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1NBQ3RDO0lBQ0gsQ0FBQzs7QUF2Qkgsb0NBd0JDO0FBdkJRLGtCQUFLLEdBQUc7SUFDYixRQUFRLEVBQUUsZUFBSyxDQUFDLE1BQU0sQ0FBQyxFQUFDLFNBQVMsRUFBQyxDQUFDLE9BQU8sQ0FBQyxFQUFDLENBQUM7SUFDN0MsS0FBSyxFQUFFLGVBQUssQ0FBQyxNQUFNLEVBQUU7Q0FDdEIsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb21tYW5kIGZyb20gJ0BvY2xpZi9jb21tYW5kJ1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJ1xuaW1wb3J0IHtmbGFnc30gZnJvbSAgJ0BvY2xpZi9jb21tYW5kJ1xuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0Jyk7XG52YXIgZnM9cmVxdWlyZSgnZnMnKTtcbmNvbnN0IGh0dHBzID0gcmVxdWlyZSgnaHR0cHMnKVxudmFyIGNvbG9ycyA9IHJlcXVpcmUoJ2NvbG9ycycpO1xuY29uc3QgY2xpZW50X2NlcnQgPSBmcy5yZWFkRmlsZVN5bmMoJ2NhLWNydC5wZW0nKVxuYXhpb3MuZGVmYXVsdHMuaHR0cHNBZ2VudCA9IG5ldyBodHRwcy5BZ2VudCh7Y2EgOiBjbGllbnRfY2VydCwga2VlcEFsaXZlOiB0cnVlfSlcblxuZXhwb3J0IGNsYXNzIExvZ2luQ29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuICBzdGF0aWMgZmxhZ3MgPSB7IFxuICAgIHVzZXJuYW1lOiBmbGFncy5zdHJpbmcoe2RlcGVuZHNPbjpbJ3Bhc3N3J119KSxcbiAgICBwYXNzdzogZmxhZ3Muc3RyaW5nKClcbiAgfVxuICBcbiAgYXN5bmMgcnVuKCkge1xuICBcdFx0Y29uc3Qge2ZsYWdzfSA9IHRoaXMucGFyc2UoTG9naW5Db21tYW5kKTsgXG4gIFx0XHR2YXIgZnM9cmVxdWlyZSgnZnMnKTtcbiAgXHRcdHZhciBqd3Q9cmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG4gIFx0XHR2YXIgY2hlY2sxPWZzLnJlYWRGaWxlU3luYygnc29mdGVuZzE5YkFQSS50b2tlbicsJ3V0ZjgnKTtcbiAgXHRcdHZhciBjaGVjazI9Y2hlY2sxLnRvU3RyaW5nKCk7XG4gIFx0XHRpZiAoY2hlY2syICE9PSAnZW1wdHknKSB7IGNvbnNvbGUubG9nKFwiVW5mb3J0dW5hdGVseSBhbm90aGVyIHVzZXIgaXMgbG9nZ2VkIGluIHJpZ2h0IG5vdy4gWW91IHdpbGwgaGF2ZSB0byB3YWl0LlwiKTt9XG4gIFx0XHRlbHNlIHsgXG4gIFx0XHRcdGxldCBkYXRhID0ge1xuICBcdFx0XHRcdHVzZXJuYW1lOiBgJHtmbGFncy51c2VybmFtZX1gLFxuICBcdFx0XHRcdHBhc3N3OiBgJHtmbGFncy5wYXNzd31gXG4gIFx0XHRcdH1cbiAgXHRcdFx0Y29uc3QgdXNlcj1hd2FpdCBheGlvcy5wb3N0KCdodHRwczovL2xvY2FsaG9zdDo4NzY1L2VuZXJneS9hcGkvTG9naW4nLGRhdGEpO1xuICBcdFx0XHRsZXQgdG9rZW49SlNPTi5zdHJpbmdpZnkodXNlci5kYXRhLnRva2VuKVxuICBcdFx0XHRmcy53cml0ZUZpbGVTeW5jKCdzb2Z0ZW5nMTliQVBJLnRva2VuJyx0b2tlbi5yZXBsYWNlKC9cIi9nLCcnKSwndXRmLTgnKTtcbiAgXHRcdFx0Y29uc29sZS5sb2coXCJTdWNjZXNzZnVsbHkgbG9nZ2VkIGluXCIpO1xuICBcdFx0fVxuICB9XG59XG4iXX0="]}