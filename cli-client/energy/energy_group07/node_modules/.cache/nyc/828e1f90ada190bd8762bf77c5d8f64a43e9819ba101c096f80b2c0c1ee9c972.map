{"version":3,"file":"/home/vangelis/TL19-07/cli-client/energy/energy_group07/src/commands/ActualvsForecast.ts","sources":["/home/vangelis/TL19-07/cli-client/energy/energy_group07/src/commands/ActualvsForecast.ts"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst command_1 = require(\"@oclif/command\");\nconst axios_1 = require(\"axios\");\nconst command_2 = require(\"@oclif/command\");\nvar fs = require('fs');\nconst https = require('https');\nconst client_cert = fs.readFileSync('ca-crt.pem');\naxios_1.default.defaults.httpsAgent = new https.Agent({ ca: client_cert, keepAlive: true });\nclass ActualvsForecastCommand extends command_1.default {\n    async run() {\n        const axios = require('axios');\n        const { flags } = this.parse(ActualvsForecastCommand);\n        var fs = require('fs');\n        var token = fs.readFileSync('softeng19bAPI.token', 'utf-8');\n        const moment = require('moment');\n        if (`${flags.date}` !== \"undefined\" && !(moment(`${flags.date}`, 'YYYY-MM-DD', true).isValid()))\n            throw new Error(\"Wrong date format\");\n        else if (`${flags.month}` !== \"undefined\" && !(moment(`${flags.month}`, 'YYYY-MM', true).isValid()))\n            throw new Error(\"Wrong date format\");\n        else if (`${flags.year}` !== \"undefined\" && !(moment(`${flags.year}`, 'YYYY', true).isValid()))\n            throw new Error(\"Wrong date format\");\n        axios.defaults.headers.common['X-OBSERVATORY-AUTH'] = token;\n        //console.log(`${flags.format}`);\n        if (`${flags.date}` !== \"undefined\") {\n            var splitted = `${flags.date}`.split(\"-\", 3);\n            // console.log('https://localhost:8765/energy/api/ActualvsForecast/' +`${flags.area}` +'/' + `${flags.timeres}` +'/date/' + splitted[0] +'-' + splitted[1] + '-' + splitted[2]+ \"?format=\" + `${flags.format}`);\n            if (`${flags.format}` == \"undefined\" || `${flags.format}` == \"json\") {\n                const data = await axios.get('https://localhost:8765/energy/api/ActualvsForecast/' + `${flags.area}` + '/' + `${flags.timeres}` + '/date/' + splitted[0] + '-' + splitted[1] + '-' + splitted[2]);\n                console.log(data.data);\n            }\n            else if (`${flags.format}` == \"csv\") {\n                const data = await axios.get('https://localhost:8765/energy/api/ActualvsForecast/' + `${flags.area}` + '/' + `${flags.timeres}` + '/date/' + splitted[0] + '-' + splitted[1] + '-' + splitted[2] + \"?format=\" + `${flags.format}`);\n                console.log(data.data);\n            }\n            else\n                console.log(\"Error 400: Bad Request\");\n        }\n        else if (`${flags.month}` !== \"undefined\") {\n            var splitted = `${flags.month}`.split(\"-\", 2);\n            if (`${flags.format}` == \"undefined\" || `${flags.format}` == \"json\") {\n                const data = await axios.get('https://localhost:8765/energy/api/ActualvsForecast/' + `${flags.area}` + '/' + `${flags.timeres}` + '/month/' + splitted[0] + '-' + splitted[1]);\n                console.log(data.data);\n            }\n            else if (`${flags.format}` == \"csv\") {\n                const data = await axios.get('https://localhost:8765/energy/api/ActualvsForecast/' + `${flags.area}` + '/' + `${flags.timeres}` + '/month/' + splitted[0] + '-' + splitted[1] + \"?format=\" + `${flags.format}`);\n                console.log(data.data);\n            }\n            else\n                console.log(\"Error 400: Bad Request\");\n        }\n        else if (`${flags.year}` !== \"undefined\") {\n            if (`${flags.format}` == \"undefined\" || `${flags.format}` == \"json\") {\n                const data = await axios.get('https://localhost:8765/energy/api/ActualvsForecast/' + `${flags.area}` + '/' + `${flags.timeres}` + '/year/' + `${flags.year}`);\n                console.log(data.data);\n            }\n            else if (`${flags.format}` == \"csv\") {\n                const data = await axios.get('https://localhost:8765/energy/api/ActualvsForecast/' + `${flags.area}` + '/' + `${flags.timeres}` + '/year/' + `${flags.year}` + \"?format=\" + `${flags.format}`);\n                console.log(data.data);\n            }\n            else\n                console.log(\"Error 400: Bad Request\");\n        }\n        else\n            console.log(\"Error 400: Bad Request\");\n    }\n}\nexports.ActualvsForecastCommand = ActualvsForecastCommand;\nActualvsForecastCommand.flags = {\n    area: command_2.flags.string({ multiple: true }),\n    timeres: command_2.flags.string({ options: ['PT15M', 'PT30M', 'PT60M'] }),\n    date: command_2.flags.string(),\n    month: command_2.flags.string(),\n    year: command_2.flags.string(),\n    format: command_2.flags.string({ options: ['json', 'csv'] })\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvdmFuZ2VsaXMvVEwxOS0wNy9jbGktY2xpZW50L2VuZXJneS9lbmVyZ3lfZ3JvdXAwNy9zcmMvY29tbWFuZHMvQWN0dWFsdnNGb3JlY2FzdC50cyIsInNvdXJjZXMiOlsiL2hvbWUvdmFuZ2VsaXMvVEwxOS0wNy9jbGktY2xpZW50L2VuZXJneS9lbmVyZ3lfZ3JvdXAwNy9zcmMvY29tbWFuZHMvQWN0dWFsdnNGb3JlY2FzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDRDQUFvQztBQUNwQyxpQ0FBeUI7QUFDekIsNENBQW9DO0FBQ3BDLElBQUksRUFBRSxHQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNyQixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7QUFDOUIsTUFBTSxXQUFXLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQTtBQUNqRCxlQUFLLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBQyxFQUFFLEVBQUcsV0FBVyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFBO0FBQ2hGLE1BQWEsdUJBQXdCLFNBQVEsaUJBQU87SUFTbEQsS0FBSyxDQUFDLEdBQUc7UUFFVixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDL0IsTUFBTSxFQUFDLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUNwRCxJQUFJLEVBQUUsR0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckIsSUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxxQkFBcUIsRUFBQyxPQUFPLENBQUMsQ0FBQztRQUUzRCxNQUFNLE1BQU0sR0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDL0IsSUFBRyxHQUFHLEtBQUssQ0FBQyxJQUFJLEVBQUUs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QUMsRUFBQyxPQUFPLEVBQUMsQ0FBQyxNQUFNLEVBQUMsS0FBSyxDQUFDLEVBQUMsQ0FBQztDQUMvQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbW1hbmQgZnJvbSAnQG9jbGlmL2NvbW1hbmQnXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnXG5pbXBvcnQge2ZsYWdzfSBmcm9tICdAb2NsaWYvY29tbWFuZCdcbnZhciBmcz1yZXF1aXJlKCdmcycpO1xuY29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpXG5jb25zdCBjbGllbnRfY2VydCA9IGZzLnJlYWRGaWxlU3luYygnY2EtY3J0LnBlbScpXG5heGlvcy5kZWZhdWx0cy5odHRwc0FnZW50ID0gbmV3IGh0dHBzLkFnZW50KHtjYSA6IGNsaWVudF9jZXJ0LCBrZWVwQWxpdmU6IHRydWV9KVxuZXhwb3J0IGNsYXNzIEFjdHVhbHZzRm9yZWNhc3RDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XG4gIHN0YXRpYyBmbGFncyA9IHtcbiAgXHRhcmVhOiBmbGFncy5zdHJpbmcoe211bHRpcGxlOiB0cnVlfSksXG4gICAgdGltZXJlczogZmxhZ3Muc3RyaW5nKHtvcHRpb25zOlsnUFQxNU0nLCdQVDMwTScsJ1BUNjBNJ119KSxcbiAgICBkYXRlOiBmbGFncy5zdHJpbmcoKSxcbiAgICBtb250aDogZmxhZ3Muc3RyaW5nKCksXG4gICAgeWVhcjogZmxhZ3Muc3RyaW5nKCksXG4gICAgZm9ybWF0OiBmbGFncy5zdHJpbmcoe29wdGlvbnM6Wydqc29uJywnY3N2J119KVxuICB9XG4gIGFzeW5jIHJ1bigpIHtcblxuXHRjb25zdCBheGlvcyA9IHJlcXVpcmUoJ2F4aW9zJyk7XG5cdGNvbnN0IHtmbGFnc30gPSB0aGlzLnBhcnNlKEFjdHVhbHZzRm9yZWNhc3RDb21tYW5kKTsgXG5cdHZhciBmcz1yZXF1aXJlKCdmcycpO1xuXHR2YXIgdG9rZW4gPSBmcy5yZWFkRmlsZVN5bmMoJ3NvZnRlbmcxOWJBUEkudG9rZW4nLCd1dGYtOCcpO1xuXHRcblx0Y29uc3QgbW9tZW50PXJlcXVpcmUoJ21vbWVudCcpO1xuXHRpZihgJHtmbGFncy5kYXRlfWAgIT09IFwidW5kZWZpbmVkXCIgJiYgIShtb21lbnQoYCR7ZmxhZ3MuZGF0ZX1gLCAnWVlZWS1NTS1ERCcsdHJ1ZSkuaXNWYWxpZCgpKSkgdGhyb3cgbmV3IEVycm9yKFwiV3JvbmcgZGF0ZSBmb3JtYXRcIik7XG5cdGVsc2UgaWYoYCR7ZmxhZ3MubW9udGh9YCAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhKG1vbWVudChgJHtmbGFncy5tb250aH1gLCAnWVlZWS1NTScsdHJ1ZSkuaXNWYWxpZCgpKSkgdGhyb3cgbmV3IEVycm9yKFwiV3JvbmcgZGF0ZSBmb3JtYXRcIik7XG5cdGVsc2UgaWYoYCR7ZmxhZ3MueWVhcn1gICE9PSBcInVuZGVmaW5lZFwiICYmICEobW9tZW50KGAke2ZsYWdzLnllYXJ9YCwgJ1lZWVknLHRydWUpLmlzVmFsaWQoKSkpIHRocm93IG5ldyBFcnJvcihcIldyb25nIGRhdGUgZm9ybWF0XCIpO1xuXHRcblx0YXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtT0JTRVJWQVRPUlktQVVUSCddPXRva2VuO1xuXHQvL2NvbnNvbGUubG9nKGAke2ZsYWdzLmZvcm1hdH1gKTtcblx0aWYgKGAke2ZsYWdzLmRhdGV9YCAhPT1cInVuZGVmaW5lZFwiKXtcblx0IHZhciBzcGxpdHRlZCA9IGAke2ZsYWdzLmRhdGV9YC5zcGxpdChcIi1cIiwgMyk7IFxuXHQvLyBjb25zb2xlLmxvZygnaHR0cHM6Ly9sb2NhbGhvc3Q6ODc2NS9lbmVyZ3kvYXBpL0FjdHVhbHZzRm9yZWNhc3QvJyArYCR7ZmxhZ3MuYXJlYX1gICsnLycgKyBgJHtmbGFncy50aW1lcmVzfWAgKycvZGF0ZS8nICsgc3BsaXR0ZWRbMF0gKyctJyArIHNwbGl0dGVkWzFdICsgJy0nICsgc3BsaXR0ZWRbMl0rIFwiP2Zvcm1hdD1cIiArIGAke2ZsYWdzLmZvcm1hdH1gKTtcblx0IGlmIChgJHtmbGFncy5mb3JtYXR9YD09IFwidW5kZWZpbmVkXCIgfHwgYCR7ZmxhZ3MuZm9ybWF0fWA9PVwianNvblwiKXtcblx0IGNvbnN0IGRhdGE9IGF3YWl0IGF4aW9zLmdldCgnaHR0cHM6Ly9sb2NhbGhvc3Q6ODc2NS9lbmVyZ3kvYXBpL0FjdHVhbHZzRm9yZWNhc3QvJyArYCR7ZmxhZ3MuYXJlYX1gICsnLycgKyBgJHtmbGFncy50aW1lcmVzfWAgKycvZGF0ZS8nICsgc3BsaXR0ZWRbMF0gKyctJyArIHNwbGl0dGVkWzFdICsgJy0nICsgc3BsaXR0ZWRbMl0pO1xuXHQgXHQgY29uc29sZS5sb2coZGF0YS5kYXRhKTtcblx0IH1cblx0IGVsc2UgaWYgKGAke2ZsYWdzLmZvcm1hdH1gPT1cImNzdlwiKSB7XG5cdCBcdCBjb25zdCBkYXRhPSBhd2FpdCBheGlvcy5nZXQoJ2h0dHBzOi8vbG9jYWxob3N0Ojg3NjUvZW5lcmd5L2FwaS9BY3R1YWx2c0ZvcmVjYXN0LycgK2Ake2ZsYWdzLmFyZWF9YCArJy8nICsgYCR7ZmxhZ3MudGltZXJlc31gICsnL2RhdGUvJyArIHNwbGl0dGVkWzBdICsnLScgKyBzcGxpdHRlZFsxXSArICctJyArIHNwbGl0dGVkWzJdKyBcIj9mb3JtYXQ9XCIgKyBgJHtmbGFncy5mb3JtYXR9YCk7XG5cdCBcdCBjb25zb2xlLmxvZyhkYXRhLmRhdGEpO1xuXHQgfVxuXHQgZWxzZSBjb25zb2xlLmxvZyhcIkVycm9yIDQwMDogQmFkIFJlcXVlc3RcIik7XG5cblx0fVxuXG5cdGVsc2UgaWYgKGAke2ZsYWdzLm1vbnRofWAgIT09XCJ1bmRlZmluZWRcIil7XG5cdCBcdCB2YXIgc3BsaXR0ZWQgPSBgJHtmbGFncy5tb250aH1gLnNwbGl0KFwiLVwiLCAyKTsgXG5cdCBcdCBcdCBpZiAoYCR7ZmxhZ3MuZm9ybWF0fWA9PSBcInVuZGVmaW5lZFwiIHx8IGAke2ZsYWdzLmZvcm1hdH1gPT1cImpzb25cIil7XG5cdCBjb25zdCBkYXRhPSBhd2FpdCBheGlvcy5nZXQoJ2h0dHBzOi8vbG9jYWxob3N0Ojg3NjUvZW5lcmd5L2FwaS9BY3R1YWx2c0ZvcmVjYXN0LycgK2Ake2ZsYWdzLmFyZWF9YCArJy8nICsgIGAke2ZsYWdzLnRpbWVyZXN9YCArJy9tb250aC8nICsgc3BsaXR0ZWRbMF0gKyctJyArIHNwbGl0dGVkWzFdKTtcblx0IFx0XHRcdCBjb25zb2xlLmxvZyhkYXRhLmRhdGEpO1xuXHQgXHRcdH1cblxuXHQgXHQgZWxzZSBpZiAoYCR7ZmxhZ3MuZm9ybWF0fWA9PVwiY3N2XCIpIHtcblx0IFx0IGNvbnN0IGRhdGE9IGF3YWl0IGF4aW9zLmdldCgnaHR0cHM6Ly9sb2NhbGhvc3Q6ODc2NS9lbmVyZ3kvYXBpL0FjdHVhbHZzRm9yZWNhc3QvJyArYCR7ZmxhZ3MuYXJlYX1gICsnLycgKyBgJHtmbGFncy50aW1lcmVzfWAgKycvbW9udGgvJyArIHNwbGl0dGVkWzBdICsnLScgKyBzcGxpdHRlZFsxXSArIFwiP2Zvcm1hdD1cIiArIGAke2ZsYWdzLmZvcm1hdH1gKTtcblx0IFx0IGNvbnNvbGUubG9nKGRhdGEuZGF0YSk7XG5cdCAgICB9XG5cdCAgICBcblx0ICAgIGVsc2UgY29uc29sZS5sb2coXCJFcnJvciA0MDA6IEJhZCBSZXF1ZXN0XCIpO1xuXHR9XG5cdFxuXHRlbHNlIGlmIChgJHtmbGFncy55ZWFyfWAgIT09XCJ1bmRlZmluZWRcIil7XG5cdCBpZiAoYCR7ZmxhZ3MuZm9ybWF0fWA9PSBcInVuZGVmaW5lZFwiIHx8IGAke2ZsYWdzLmZvcm1hdH1gPT1cImpzb25cIil7XG5cdCBjb25zdCBkYXRhPSBhd2FpdCBheGlvcy5nZXQoJ2h0dHBzOi8vbG9jYWxob3N0Ojg3NjUvZW5lcmd5L2FwaS9BY3R1YWx2c0ZvcmVjYXN0LycgK2Ake2ZsYWdzLmFyZWF9YCArJy8nICArIGAke2ZsYWdzLnRpbWVyZXN9YCArJy95ZWFyLycgK2Ake2ZsYWdzLnllYXJ9YCk7XG5cdCBjb25zb2xlLmxvZyhkYXRhLmRhdGEpO1xuXHQgfVxuXHQgXG5cdCBlbHNlIGlmIChgJHtmbGFncy5mb3JtYXR9YD09XCJjc3ZcIikge1xuXHQgXHQgY29uc3QgZGF0YT0gYXdhaXQgYXhpb3MuZ2V0KCdodHRwczovL2xvY2FsaG9zdDo4NzY1L2VuZXJneS9hcGkvQWN0dWFsdnNGb3JlY2FzdC8nICtgJHtmbGFncy5hcmVhfWAgKycvJyAgKyBgJHtmbGFncy50aW1lcmVzfWAgKycveWVhci8nICsgYCR7ZmxhZ3MueWVhcn1gICsgXCI/Zm9ybWF0PVwiICsgYCR7ZmxhZ3MuZm9ybWF0fWApO1xuXHQgXHQgY29uc29sZS5sb2coZGF0YS5kYXRhKTtcblx0ICAgIH1cblx0ICBcblx0IGVsc2UgY29uc29sZS5sb2coXCJFcnJvciA0MDA6IEJhZCBSZXF1ZXN0XCIpO1xuXHR9XG5cdFxuXHRlbHNlIGNvbnNvbGUubG9nKFwiRXJyb3IgNDAwOiBCYWQgUmVxdWVzdFwiKTtcblx0XG5cdFxuICB9IFxufVxuIl19"]}