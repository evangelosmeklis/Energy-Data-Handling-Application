{"version":3,"file":"/home/vangelis/TL19-07/cli-client/energy/energy_group07/src/commands/Admin.ts","sources":["/home/vangelis/TL19-07/cli-client/energy/energy_group07/src/commands/Admin.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,wBAAwB;AACxB,MAAM,SAAS,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC5C,MAAM,SAAS,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC5C,MAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AACjC,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACvB,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC/B,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC/B,MAAM,WAAW,GAAG,EAAE,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;AAClD,KAAK,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,WAAW,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;AAClF,MAAM,YAAa,SAAQ,SAAS,CAAC,OAAO;IACxC,KAAK,CAAC,GAAG;QACL,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;QAC3C,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;QACvB,IAAI,GAAG,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;QAClC,IAAI,KAAK,GAAG,EAAE,CAAC,YAAY,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC;QAC5D,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,oBAAoB,CAAC,GAAG,KAAK,CAAC;QAC5D,qBAAqB;QACrB,iBAAiB;QACjB,IAAI,GAAG,KAAK,CAAC,OAAO,EAAE,KAAK,WAAW,IAAI,GAAG,KAAK,CAAC,KAAK,EAAE,KAAK,WAAW,IAAI,GAAG,KAAK,CAAC,KAAK,EAAE,KAAK,WAAW,IAAI,GAAG,KAAK,CAAC,KAAK,EAAE,KAAK,WAAW,EAAE;YAChJ,IAAI,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC;YACjD,IAAI,IAAI,GAAG,IAAI,MAAM,CAAC;gBAClB,QAAQ,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE;gBAC5B,KAAK,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE;gBACvB,KAAK,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE;gBACvB,KAAK,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE;aAC1B,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,IAAI,CAAC,+CAA+C,EAAE,IAAI,CAAC,CAAC;YACxE,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;SAC5C;QACD,aAAa;aACR,IAAI,GAAG,KAAK,CAAC,OAAO,EAAE,KAAK,WAAW,IAAI,GAAG,KAAK,CAAC,KAAK,EAAE,KAAK,WAAW,IAAI,GAAG,KAAK,CAAC,KAAK,EAAE,KAAK,WAAW,IAAI,GAAG,KAAK,CAAC,KAAK,EAAE,KAAK,WAAW,EAAE;YACrJ,IAAI,IAAI,GAAG,IAAI,MAAM,CAAC;gBAClB,QAAQ,EAAE,GAAG,KAAK,CAAC,OAAO,EAAE;gBAC5B,KAAK,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE;gBACvB,KAAK,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE;gBACvB,KAAK,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE;aAC1B,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,GAAG,CAAC,gDAAgD,GAAG,GAAG,KAAK,CAAC,OAAO,EAAE,EAAE,IAAI,CAAC,CAAC;YAC7F,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;SAC5C;QACD,gBAAgB;aACX,IAAI,GAAG,KAAK,CAAC,UAAU,EAAE,KAAK,WAAW,EAAE;YAC5C,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,GAAG,CAAC,gDAAgD,GAAG,GAAG,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC;YACvG,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC1B;QACD,iBAAiB;aACZ,IAAI,GAAG,KAAK,CAAC,OAAO,EAAE,KAAK,WAAW,IAAI,GAAG,KAAK,CAAC,MAAM,EAAE,KAAK,WAAW,EAAE;YAC9E,IAAI,GAAG,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;YAChC,IAAI,QAAQ,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;YACpC,MAAM,SAAS,GAAG,IAAI,QAAQ,EAAE,CAAC;YACjC,IAAI,IAAI,GAAG,EAAE,CAAC;YACd,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,gBAAgB,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YACjE,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,EAAE,UAAU,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,EAAE,cAAc,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5H,IAAI,MAAM,GAAG,SAAS,CAAC,UAAU,EAAE,CAAC;YACpC,MAAM,MAAM,GAAG;gBACX,MAAM,EAAE,MAAM;gBACd,IAAI,EAAE,IAAI;gBACV,OAAO,EAAE;oBACL,oBAAoB,EAAE,KAAK;oBAC3B,MAAM;iBACT;gBACD,gBAAgB,EAAE,SAAS;aAC9B,CAAC;YACF,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,0CAA0C,GAAG,GAAG,KAAK,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;SAC/G;;YAEG,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,GAAG,KAAK,CAAC,OAAO,EAAE,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE,EAAE,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;IAC9G,CAAC;CACJ;AACD,OAAO,CAAC,YAAY,GAAG,YAAY,CAAC;AACpC,YAAY,CAAC,KAAK,GAAG;IACjB,OAAO,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,CAAC,SAAS,EAAE,YAAY,EAAE,SAAS,CAAC,EAAE,CAAC;IAC1G,OAAO,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,YAAY,CAAC,EAAE,CAAC;IAC1G,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC;IACvD,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC;IACvD,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,EAAE;IAC/B,UAAU,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,EAAE,CAAC;IACpF,OAAO,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,QAAQ,CAAC,EAAE,SAAS,EAAE,CAAC,YAAY,EAAE,SAAS,EAAE,SAAS,CAAC,EAAE,CAAC;IAC3G,MAAM,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM,EAAE;CACnC,CAAC","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// just prompt for input\nconst command_1 = require(\"@oclif/command\");\nconst command_2 = require(\"@oclif/command\");\nconst bcrypt = require('bcrypt');\nvar fs = require('fs');\nconst https = require('https');\nconst axios = require('axios');\nconst client_cert = fs.readFileSync('ca-crt.pem');\naxios.defaults.httpsAgent = new https.Agent({ ca: client_cert, keepAlive: true });\nclass AdminCommand extends command_1.Command {\n    async run() {\n        const { flags } = this.parse(AdminCommand);\n        var fs = require('fs');\n        var jwt = require('jsonwebtoken');\n        var token = fs.readFileSync('softeng19bAPI.token', 'utf-8');\n        axios.defaults.headers.common['X-OBSERVATORY-AUTH'] = token;\n        //await cli.anykey();\n        //create new user\n        if (`${flags.newuser}` !== \"undefined\" && `${flags.passw}` !== \"undefined\" && `${flags.email}` !== \"undefined\" && `${flags.quota}` !== \"undefined\") {\n            let hash = bcrypt.hashSync(`${flags.passw}`, 10);\n            let body = new Object({\n                username: `${flags.newuser}`,\n                passw: `${flags.passw}`,\n                email: `${flags.email}`,\n                quota: `${flags.quota}`\n            });\n            await axios.post('https://localhost:8765/energy/api/Admin/users', body);\n            console.log(\"User inserted succesfully\");\n        }\n        //modify user\n        else if (`${flags.moduser}` !== \"undefined\" && `${flags.passw}` !== \"undefined\" && `${flags.email}` !== \"undefined\" && `${flags.quota}` !== \"undefined\") {\n            let body = new Object({\n                username: `${flags.moduser}`,\n                passw: `${flags.passw}`,\n                email: `${flags.email}`,\n                quota: `${flags.quota}`\n            });\n            await axios.put('https://localhost:8765/energy/api/Admin/users/' + `${flags.moduser}`, body);\n            console.log('User modified succesfully');\n        }\n        //get userstatus\n        else if (`${flags.userstatus}` !== \"undefined\") {\n            const data = await axios.get('https://localhost:8765/energy/api/Admin/users/' + `${flags.userstatus}`);\n            console.log(data.data);\n        }\n        //insert new data\n        else if (`${flags.newdata}` !== \"undefined\" && `${flags.source}` !== \"undefined\") {\n            var csv = require('csv-parser');\n            var FormData = require('form-data');\n            const form_data = new FormData();\n            var data = [];\n            form_data.append(\"file\", fs.createReadStream(`${flags.source}`));\n            form_data.pipe(csv()).on('data', function (row) { data.push(row); }).on('end', function () { console.log('Data Loaded'); });\n            let header = form_data.getHeaders();\n            const config = {\n                method: 'POST',\n                port: 8765,\n                headers: {\n                    \"x-observatory-auth\": token,\n                    header\n                },\n                maxContentLength: 524228890\n            };\n            return await axios.post('https://localhost:8765/energy/api/Admin/' + `${flags.newdata}`, form_data, config);\n        }\n        else\n            console.log(\"Unsuccesful\" + `${flags.newuser}`, `${flags.passw}`, `${flags.email}`, `${flags.quota}`);\n    }\n}\nexports.AdminCommand = AdminCommand;\nAdminCommand.flags = {\n    newuser: command_2.flags.string({ dependsOn: ['passw'], exclusive: ['newdata', 'userstatus', 'moduser'] }),\n    moduser: command_2.flags.string({ dependsOn: ['passw'], exclusive: ['newuser', 'newdata', 'userstatus'] }),\n    passw: command_2.flags.string({ dependsOn: ['email'] }),\n    email: command_2.flags.string({ dependsOn: ['quota'] }),\n    quota: command_2.flags.string(),\n    userstatus: command_2.flags.string({ exclusive: ['newdata', 'newuser', 'moduser'] }),\n    newdata: command_2.flags.string({ dependsOn: ['source'], exclusive: ['userstatus', 'newuser', 'moduser'] }),\n    source: command_2.flags.string()\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvdmFuZ2VsaXMvVEwxOS0wNy9jbGktY2xpZW50L2VuZXJneS9lbmVyZ3lfZ3JvdXAwNy9zcmMvY29tbWFuZHMvQWRtaW4udHMiLCJzb3VyY2VzIjpbIi9ob21lL3ZhbmdlbGlzL1RMMTktMDcvY2xpLWNsaWVudC9lbmVyZ3kvZW5lcmd5X2dyb3VwMDcvc3JjL2NvbW1hbmRzL0FkbWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0Esd0JBQXdCO0FBQ3hCLDRDQUFzQztBQUV0Qyw0Q0FBcUM7QUFDckMsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2pDLElBQUksRUFBRSxHQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNyQixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7QUFDOUIsTUFBTSxLQUFLLEdBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzdCLE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUE7QUFDakQsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUMsRUFBRSxFQUFHLFdBQVcsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQTtBQUNoRixNQUFhLFlBQWEsU0FBUSxpQkFBTztJQVd2QyxLQUFLLENBQUMsR0FBRztRQUNQLE1BQU0sRUFBQyxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQzVDLElBQUksRUFBRSxHQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQixJQUFJLEdBQUcsR0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDaEMsSUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxxQkFBcUIsRUFBQyxPQUFPLENBQUMsQ0FBQztRQUMzRCxLQUFLLENBQUMs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U0FBUyxFQUFDLENBQUMsU0FBUyxFQUFDLFNBQVMsRUFBQyxZQUFZLENBQUMsRUFBQyxDQUFDO0lBQ3pGLEtBQUssRUFBRSxlQUFLLENBQUMsTUFBTSxDQUFDLEVBQUMsU0FBUyxFQUFDLENBQUMsT0FBTyxDQUFDLEVBQUMsQ0FBQztJQUMxQyxLQUFLLEVBQUUsZUFBSyxDQUFDLE1BQU0sQ0FBQyxFQUFDLFNBQVMsRUFBQyxDQUFDLE9BQU8sQ0FBQyxFQUFDLENBQUM7SUFDMUMsS0FBSyxFQUFFLGVBQUssQ0FBQyxNQUFNLEVBQUU7SUFDckIsVUFBVSxFQUFFLGVBQUssQ0FBQyxNQUFNLENBQUMsRUFBQyxTQUFTLEVBQUMsQ0FBQyxTQUFTLEVBQUMsU0FBUyxFQUFDLFNBQVMsQ0FBQyxFQUFDLENBQUM7SUFDckUsT0FBTyxFQUFFLGVBQUssQ0FBQyxNQUFNLENBQUMsRUFBQyxTQUFTLEVBQUMsQ0FBQyxRQUFRLENBQUMsRUFBQyxTQUFTLEVBQUMsQ0FBQyxZQUFZLEVBQUMsU0FBUyxFQUFDLFNBQVMsQ0FBQyxFQUFDLENBQUM7SUFDMUYsTUFBTSxFQUFFLGVBQUssQ0FBQyxNQUFNLEVBQUU7Q0FDdkIsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjbGkgZnJvbSAnY2xpLXV4J1xuLy8ganVzdCBwcm9tcHQgZm9yIGlucHV0XG5pbXBvcnQge0NvbW1hbmR9IGZyb20gJ0BvY2xpZi9jb21tYW5kJ1xuaW1wb3J0IHtjcmVhdGVDb25uZWN0aW9ufSBmcm9tIFwidHlwZW9ybVwiO1xuaW1wb3J0IHtmbGFnc30gZnJvbSAgJ0BvY2xpZi9jb21tYW5kJ1xuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0Jyk7XG52YXIgZnM9cmVxdWlyZSgnZnMnKTtcbmNvbnN0IGh0dHBzID0gcmVxdWlyZSgnaHR0cHMnKVxuY29uc3QgYXhpb3M9cmVxdWlyZSgnYXhpb3MnKTtcbmNvbnN0IGNsaWVudF9jZXJ0ID0gZnMucmVhZEZpbGVTeW5jKCdjYS1jcnQucGVtJylcbmF4aW9zLmRlZmF1bHRzLmh0dHBzQWdlbnQgPSBuZXcgaHR0cHMuQWdlbnQoe2NhIDogY2xpZW50X2NlcnQsIGtlZXBBbGl2ZTogdHJ1ZX0pXG5leHBvcnQgY2xhc3MgQWRtaW5Db21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XG4gIHN0YXRpYyBmbGFncyA9IHsgXG4gICAgbmV3dXNlcjogZmxhZ3Muc3RyaW5nKHtkZXBlbmRzT246WydwYXNzdyddLGV4Y2x1c2l2ZTpbJ25ld2RhdGEnLCd1c2Vyc3RhdHVzJywnbW9kdXNlciddfSksXG4gICAgbW9kdXNlcjogZmxhZ3Muc3RyaW5nKHtkZXBlbmRzT246WydwYXNzdyddLGV4Y2x1c2l2ZTpbJ25ld3VzZXInLCduZXdkYXRhJywndXNlcnN0YXR1cyddfSksXG4gICAgcGFzc3c6IGZsYWdzLnN0cmluZyh7ZGVwZW5kc09uOlsnZW1haWwnXX0pLFxuICAgIGVtYWlsOiBmbGFncy5zdHJpbmcoe2RlcGVuZHNPbjpbJ3F1b3RhJ119KSxcbiAgICBxdW90YTogZmxhZ3Muc3RyaW5nKCksXG4gICAgdXNlcnN0YXR1czogZmxhZ3Muc3RyaW5nKHtleGNsdXNpdmU6WyduZXdkYXRhJywnbmV3dXNlcicsJ21vZHVzZXInXX0pLFxuICAgIG5ld2RhdGE6IGZsYWdzLnN0cmluZyh7ZGVwZW5kc09uOlsnc291cmNlJ10sZXhjbHVzaXZlOlsndXNlcnN0YXR1cycsJ25ld3VzZXInLCdtb2R1c2VyJ119KSxcbiAgICBzb3VyY2U6IGZsYWdzLnN0cmluZygpXG4gIH1cbiAgYXN5bmMgcnVuKCkge1xuICAgIGNvbnN0IHtmbGFnc30gPSB0aGlzLnBhcnNlKEFkbWluQ29tbWFuZCk7IFxuXHR2YXIgZnM9cmVxdWlyZSgnZnMnKTtcblx0dmFyIGp3dD1yZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcblx0dmFyIHRva2VuID0gZnMucmVhZEZpbGVTeW5jKCdzb2Z0ZW5nMTliQVBJLnRva2VuJywndXRmLTgnKTtcblx0YXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtT0JTRVJWQVRPUlktQVVUSCddPXRva2VuO1xuXHQvL2F3YWl0IGNsaS5hbnlrZXkoKTtcblx0Ly9jcmVhdGUgbmV3IHVzZXJcblx0aWYgKGAke2ZsYWdzLm5ld3VzZXJ9YCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBgJHtmbGFncy5wYXNzd31gICE9PSBcInVuZGVmaW5lZFwiICYmIGAke2ZsYWdzLmVtYWlsfWAgIT09IFwidW5kZWZpbmVkXCIgJiYgYCR7ZmxhZ3MucXVvdGF9YCAhPT0gXCJ1bmRlZmluZWRcIiApe1xuXHRcdFx0bGV0IGhhc2ggPSBiY3J5cHQuaGFzaFN5bmMoYCR7ZmxhZ3MucGFzc3d9YCwxMCk7XG5cdFx0XHRsZXQgYm9keSA9IG5ldyBPYmplY3QgKHtcblx0XHRcdFx0dXNlcm5hbWU6IGAke2ZsYWdzLm5ld3VzZXJ9YCxcblx0XHRcdFx0cGFzc3c6IGAke2ZsYWdzLnBhc3N3fWAsXG5cdFx0XHRcdGVtYWlsOiBgJHtmbGFncy5lbWFpbH1gLFxuXHRcdFx0XHRxdW90YTogYCR7ZmxhZ3MucXVvdGF9YCBcblx0XHRcdH0pXG5cdFx0XHRhd2FpdCBheGlvcy5wb3N0KCdodHRwczovL2xvY2FsaG9zdDo4NzY1L2VuZXJneS9hcGkvQWRtaW4vdXNlcnMnLGJvZHkpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJVc2VyIGluc2VydGVkIHN1Y2Nlc2Z1bGx5XCIpO1xuXHRcdFx0XHRcblx0fVxuXHRcblx0Ly9tb2RpZnkgdXNlclxuXHRlbHNlIGlmIChgJHtmbGFncy5tb2R1c2VyfWAgIT09IFwidW5kZWZpbmVkXCIgJiYgYCR7ZmxhZ3MucGFzc3d9YCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBgJHtmbGFncy5lbWFpbH1gICE9PSBcInVuZGVmaW5lZFwiICYmIGAke2ZsYWdzLnF1b3RhfWAgIT09IFwidW5kZWZpbmVkXCIgKXtcblx0XHRsZXQgYm9keSA9IG5ldyBPYmplY3QgKHtcblx0XHRcdFx0dXNlcm5hbWU6IGAke2ZsYWdzLm1vZHVzZXJ9YCxcblx0XHRcdFx0cGFzc3c6IGAke2ZsYWdzLnBhc3N3fWAsXG5cdFx0XHRcdGVtYWlsOiBgJHtmbGFncy5lbWFpbH1gLFxuXHRcdFx0XHRxdW90YTogYCR7ZmxhZ3MucXVvdGF9YCBcblx0XHR9KVxuXHRcdGF3YWl0IGF4aW9zLnB1dCgnaHR0cHM6Ly9sb2NhbGhvc3Q6ODc2NS9lbmVyZ3kvYXBpL0FkbWluL3VzZXJzLycgK2Ake2ZsYWdzLm1vZHVzZXJ9YCxib2R5KTtcblx0XHRjb25zb2xlLmxvZygnVXNlciBtb2RpZmllZCBzdWNjZXNmdWxseScpO1xuXHR9XG5cdFxuXHRcblx0Ly9nZXQgdXNlcnN0YXR1c1xuXHRlbHNlIGlmIChgJHtmbGFncy51c2Vyc3RhdHVzfWAgIT09IFwidW5kZWZpbmVkXCIpe1xuXHRcdGNvbnN0IGRhdGE9YXdhaXQgYXhpb3MuZ2V0KCdodHRwczovL2xvY2FsaG9zdDo4NzY1L2VuZXJneS9hcGkvQWRtaW4vdXNlcnMvJyArYCR7ZmxhZ3MudXNlcnN0YXR1c31gKTtcdFxuXHRcdGNvbnNvbGUubG9nKGRhdGEuZGF0YSk7XG5cdH1cblxuXHRcblx0Ly9pbnNlcnQgbmV3IGRhdGFcblx0ZWxzZSBpZiAoYCR7ZmxhZ3MubmV3ZGF0YX1gICE9PSBcInVuZGVmaW5lZFwiICYmIGAke2ZsYWdzLnNvdXJjZX1gICE9PSBcInVuZGVmaW5lZFwiICl7XG5cdFx0dmFyIGNzdj1yZXF1aXJlKCdjc3YtcGFyc2VyJyk7XG5cdFx0dmFyIEZvcm1EYXRhPXJlcXVpcmUoJ2Zvcm0tZGF0YScpO1xuXHRcdGNvbnN0IGZvcm1fZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuXHRcdHZhciBkYXRhID0gW107XG5cdFx0Zm9ybV9kYXRhLmFwcGVuZChcImZpbGVcIiwgZnMuY3JlYXRlUmVhZFN0cmVhbShgJHtmbGFncy5zb3VyY2V9YCkpO1xuXHRcdGZvcm1fZGF0YS5waXBlKGNzdigpKS5vbignZGF0YScsZnVuY3Rpb24ocm93OmFueSl7IGRhdGEucHVzaChyb3cpIH0pLm9uKCdlbmQnLGZ1bmN0aW9uKCl7Y29uc29sZS5sb2coJ0RhdGEgTG9hZGVkJyl9KTtcblx0XHRsZXQgaGVhZGVyID0gZm9ybV9kYXRhLmdldEhlYWRlcnMoKTtcblx0XHRjb25zdCBjb25maWcgPSB7XG5cdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdHBvcnQ6ODc2NSxcblx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XCJ4LW9ic2VydmF0b3J5LWF1dGhcIjp0b2tlbixcblx0XHRcdFx0aGVhZGVyXG5cdFx0XHR9LFxuIFx0XHRcdG1heENvbnRlbnRMZW5ndGg6NTI0MjI4ODkwXG5cdFx0fTtcblxuXHRcdHJldHVybiBhd2FpdCBheGlvcy5wb3N0KCdodHRwczovL2xvY2FsaG9zdDo4NzY1L2VuZXJneS9hcGkvQWRtaW4vJyArIGAke2ZsYWdzLm5ld2RhdGF9YCwgZm9ybV9kYXRhLGNvbmZpZyk7XG5cdH1cblx0ZWxzZSBjb25zb2xlLmxvZyhcIlVuc3VjY2VzZnVsXCIgKyBgJHtmbGFncy5uZXd1c2VyfWAsYCR7ZmxhZ3MucGFzc3d9YCxgJHtmbGFncy5lbWFpbH1gLGAke2ZsYWdzLnF1b3RhfWApOyAgXG4gIH1cbn1cblxuXG5cblxuXG5cbiJdfQ=="]}